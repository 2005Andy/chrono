#include "chrono_vsg/shapes/ChVSGSphere.h"

//#define STB_IMAGE_IMPLEMENTATION

#include "chrono_thirdparty/stb/stb_image.h"

using namespace chrono::vsg3d;

ChVSGSphere::ChVSGSphere() {}

void ChVSGSphere::compile(vsg::ref_ptr<vsg::Node> subgraph) {
    // std::cout << "Builder::compile(" << subgraph << ") _compile = " << _compile << std::endl;
    if (_compile) {
        subgraph->accept(*_compile);
        _compile->context.record();
        _compile->context.waitForCompletion();
    }
}

vsg::ref_ptr<vsg::Node> ChVSGSphere::createTexturedNode(vsg::vec4 color, vsg::ref_ptr<vsg::MatrixTransform> transform) {
    // set up search paths to SPIRV shaders and textures
    vsg::ref_ptr<vsg::ShaderStage> vertexShader = vsg::ShaderStage::read(
        VK_SHADER_STAGE_VERTEX_BIT, "main", GetChronoDataFile("vsg/shaders/vert_PushConstants.spv"));
    vsg::ref_ptr<vsg::ShaderStage> fragmentShader = vsg::ShaderStage::read(
        VK_SHADER_STAGE_FRAGMENT_BIT, "main", GetChronoDataFile("vsg/shaders/frag_PushConstants.spv"));
    if (!vertexShader || !fragmentShader) {
        std::cout << "Could not create shaders." << std::endl;
        return {};
    }

    // read texture image file with stb_image
    int texWidth, texHeight, texChannels;
    float* pixels =
        stbi_loadf(GetChronoDataFile("redwhite.png").c_str(), &texWidth, &texHeight, &texChannels, STBI_rgb_alpha);

    VkDeviceSize imageSize = texWidth * texHeight * 4;
    GetLog() << "Image size = " << texWidth << " * " << texWidth << " * " << texChannels << "\n";
    auto image = vsg::vec4Array2D::create(texWidth, texHeight, color, vsg::Data::Layout{VK_FORMAT_R32G32B32A32_SFLOAT});
    int k = 0;
    for (int j = 0; j < texHeight; j++) {
        for (int i = 0; i < texWidth; i++) {
            float r = pixels[k++];
            float g = pixels[k++];
            float b = pixels[k++];
            float a = pixels[k++];
            vsg::vec4 col(r, g, b, a);
            image->set(i, j, col);
        }
    }
    auto textureData = image;
    stbi_image_free(pixels);

    // set up graphics pipeline
    vsg::DescriptorSetLayoutBindings descriptorBindings{
        {0, VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER, 1, VK_SHADER_STAGE_FRAGMENT_BIT,
         nullptr}  // { binding, descriptorTpe, descriptorCount, stageFlags, pImmutableSamplers}
    };

    auto descriptorSetLayout = vsg::DescriptorSetLayout::create(descriptorBindings);
    vsg::DescriptorSetLayouts descriptorSetLayouts{descriptorSetLayout};

    vsg::PushConstantRanges pushConstantRanges{
        {VK_SHADER_STAGE_VERTEX_BIT, 0, 128}  // projection view, and model matrices, actual push constant calls
                                              // autoaatically provided by the VSG's DispatchTraversal
    };

    auto pipelineLayout = vsg::PipelineLayout::create(descriptorSetLayouts, pushConstantRanges);

    vsg::VertexInputState::Bindings vertexBindingsDescriptions{
        VkVertexInputBindingDescription{0, sizeof(vsg::vec3), VK_VERTEX_INPUT_RATE_VERTEX},  // vertex data
        VkVertexInputBindingDescription{1, sizeof(vsg::vec4), VK_VERTEX_INPUT_RATE_VERTEX},  // colour data
        VkVertexInputBindingDescription{2, sizeof(vsg::vec2), VK_VERTEX_INPUT_RATE_VERTEX}   // tex coord data
    };

    vsg::VertexInputState::Attributes vertexAttributeDescriptions{
        VkVertexInputAttributeDescription{0, 0, VK_FORMAT_R32G32B32_SFLOAT, 0},     // vertex data
        VkVertexInputAttributeDescription{1, 1, VK_FORMAT_R32G32B32A32_SFLOAT, 0},  // colour data
        VkVertexInputAttributeDescription{2, 2, VK_FORMAT_R32G32_SFLOAT, 0},        // tex coord data
    };

    vsg::GraphicsPipelineStates pipelineStates{
        vsg::VertexInputState::create(vertexBindingsDescriptions, vertexAttributeDescriptions),
        vsg::InputAssemblyState::create(),
        vsg::RasterizationState::create(),
        vsg::MultisampleState::create(),
        vsg::ColorBlendState::create(),
        vsg::DepthStencilState::create()};

    auto graphicsPipeline =
        vsg::GraphicsPipeline::create(pipelineLayout, vsg::ShaderStages{vertexShader, fragmentShader}, pipelineStates);
    auto bindGraphicsPipeline = vsg::BindGraphicsPipeline::create(graphicsPipeline);

    // create texture image and associated DescriptorSets and binding
    auto texture = vsg::DescriptorImage::create(vsg::Sampler::create(), textureData, 0, 0,
                                                VK_DESCRIPTOR_TYPE_COMBINED_IMAGE_SAMPLER);

    auto descriptorSet = vsg::DescriptorSet::create(descriptorSetLayout, vsg::Descriptors{texture});
    auto bindDescriptorSets = vsg::BindDescriptorSets::create(
        VK_PIPELINE_BIND_POINT_GRAPHICS, graphicsPipeline->getPipelineLayout(), 0, vsg::DescriptorSets{descriptorSet});

    // create StateGroup as the root of the scene/command graph to hold the GraphicsProgram, and binding of Descriptors
    // to decorate the whole graph
    auto scenegraph = vsg::StateGroup::create();
    scenegraph->add(bindGraphicsPipeline);
    scenegraph->add(bindDescriptorSets);

    // set up vertex and index arrays
    auto vertices = vsg::vec3Array::create({{0, 0, 1},
                                            {0, 0, -1},
                                            {0.258819, 0, 0.965926},
                                            {0.25, 0.0669873, 0.965926},
                                            {0.224144, 0.12941, 0.965926},
                                            {0.183013, 0.183013, 0.965926},
                                            {0.12941, 0.224144, 0.965926},
                                            {0.0669873, 0.25, 0.965926},
                                            {1.58481e-17, 0.258819, 0.965926},
                                            {-0.0669873, 0.25, 0.965926},
                                            {-0.12941, 0.224144, 0.965926},
                                            {-0.183013, 0.183013, 0.965926},
                                            {-0.224144, 0.12941, 0.965926},
                                            {-0.25, 0.0669873, 0.965926},
                                            {-0.258819, 3.16962e-17, 0.965926},
                                            {-0.25, -0.0669873, 0.965926},
                                            {-0.224144, -0.12941, 0.965926},
                                            {-0.183013, -0.183013, 0.965926},
                                            {-0.12941, -0.224144, 0.965926},
                                            {-0.0669873, -0.25, 0.965926},
                                            {-4.75443e-17, -0.258819, 0.965926},
                                            {0.0669873, -0.25, 0.965926},
                                            {0.12941, -0.224144, 0.965926},
                                            {0.183013, -0.183013, 0.965926},
                                            {0.224144, -0.12941, 0.965926},
                                            {0.25, -0.0669873, 0.965926},
                                            {0.258819, -6.33924e-17, 0.965926},
                                            {0.5, 0, 0.866025},
                                            {0.482963, 0.12941, 0.866025},
                                            {0.433013, 0.25, 0.866025},
                                            {0.353553, 0.353553, 0.866025},
                                            {0.25, 0.433013, 0.866025},
                                            {0.12941, 0.482963, 0.866025},
                                            {3.06162e-17, 0.5, 0.866025},
                                            {-0.12941, 0.482963, 0.866025},
                                            {-0.25, 0.433013, 0.866025},
                                            {-0.353553, 0.353553, 0.866025},
                                            {-0.433013, 0.25, 0.866025},
                                            {-0.482963, 0.12941, 0.866025},
                                            {-0.5, 6.12323e-17, 0.866025},
                                            {-0.482963, -0.12941, 0.866025},
                                            {-0.433013, -0.25, 0.866025},
                                            {-0.353553, -0.353553, 0.866025},
                                            {-0.25, -0.433013, 0.866025},
                                            {-0.12941, -0.482963, 0.866025},
                                            {-9.18485e-17, -0.5, 0.866025},
                                            {0.12941, -0.482963, 0.866025},
                                            {0.25, -0.433013, 0.866025},
                                            {0.353553, -0.353553, 0.866025},
                                            {0.433013, -0.25, 0.866025},
                                            {0.482963, -0.12941, 0.866025},
                                            {0.5, -1.22465e-16, 0.866025},
                                            {0.707107, 0, 0.707107},
                                            {0.683013, 0.183013, 0.707107},
                                            {0.612372, 0.353553, 0.707107},
                                            {0.5, 0.5, 0.707107},
                                            {0.353553, 0.612372, 0.707107},
                                            {0.183013, 0.683013, 0.707107},
                                            {4.32978e-17, 0.707107, 0.707107},
                                            {-0.183013, 0.683013, 0.707107},
                                            {-0.353553, 0.612372, 0.707107},
                                            {-0.5, 0.5, 0.707107},
                                            {-0.612372, 0.353553, 0.707107},
                                            {-0.683013, 0.183013, 0.707107},
                                            {-0.707107, 8.65956e-17, 0.707107},
                                            {-0.683013, -0.183013, 0.707107},
                                            {-0.612372, -0.353553, 0.707107},
                                            {-0.5, -0.5, 0.707107},
                                            {-0.353553, -0.612372, 0.707107},
                                            {-0.183013, -0.683013, 0.707107},
                                            {-1.29893e-16, -0.707107, 0.707107},
                                            {0.183013, -0.683013, 0.707107},
                                            {0.353553, -0.612372, 0.707107},
                                            {0.5, -0.5, 0.707107},
                                            {0.612372, -0.353553, 0.707107},
                                            {0.683013, -0.183013, 0.707107},
                                            {0.707107, -1.73191e-16, 0.707107},
                                            {0.866025, 0, 0.5},
                                            {0.836516, 0.224144, 0.5},
                                            {0.75, 0.433013, 0.5},
                                            {0.612372, 0.612372, 0.5},
                                            {0.433013, 0.75, 0.5},
                                            {0.224144, 0.836516, 0.5},
                                            {5.30288e-17, 0.866025, 0.5},
                                            {-0.224144, 0.836516, 0.5},
                                            {-0.433013, 0.75, 0.5},
                                            {-0.612372, 0.612372, 0.5},
                                            {-0.75, 0.433013, 0.5},
                                            {-0.836516, 0.224144, 0.5},
                                            {-0.866025, 1.06058e-16, 0.5},
                                            {-0.836516, -0.224144, 0.5},
                                            {-0.75, -0.433013, 0.5},
                                            {-0.612372, -0.612372, 0.5},
                                            {-0.433013, -0.75, 0.5},
                                            {-0.224144, -0.836516, 0.5},
                                            {-1.59086e-16, -0.866025, 0.5},
                                            {0.224144, -0.836516, 0.5},
                                            {0.433013, -0.75, 0.5},
                                            {0.612372, -0.612372, 0.5},
                                            {0.75, -0.433013, 0.5},
                                            {0.836516, -0.224144, 0.5},
                                            {0.866025, -2.12115e-16, 0.5},
                                            {0.965926, 0, 0.258819},
                                            {0.933013, 0.25, 0.258819},
                                            {0.836516, 0.482963, 0.258819},
                                            {0.683013, 0.683013, 0.258819},
                                            {0.482963, 0.836516, 0.258819},
                                            {0.25, 0.933013, 0.258819},
                                            {5.91459e-17, 0.965926, 0.258819},
                                            {-0.25, 0.933013, 0.258819},
                                            {-0.482963, 0.836516, 0.258819},
                                            {-0.683013, 0.683013, 0.258819},
                                            {-0.836516, 0.482963, 0.258819},
                                            {-0.933013, 0.25, 0.258819},
                                            {-0.965926, 1.18292e-16, 0.258819},
                                            {-0.933013, -0.25, 0.258819},
                                            {-0.836516, -0.482963, 0.258819},
                                            {-0.683013, -0.683013, 0.258819},
                                            {-0.482963, -0.836516, 0.258819},
                                            {-0.25, -0.933013, 0.258819},
                                            {-1.77438e-16, -0.965926, 0.258819},
                                            {0.25, -0.933013, 0.258819},
                                            {0.482963, -0.836516, 0.258819},
                                            {0.683013, -0.683013, 0.258819},
                                            {0.836516, -0.482963, 0.258819},
                                            {0.933013, -0.25, 0.258819},
                                            {0.965926, -2.36584e-16, 0.258819},
                                            {1, 0, 6.12323e-17},
                                            {0.965926, 0.258819, 6.12323e-17},
                                            {0.866025, 0.5, 6.12323e-17},
                                            {0.707107, 0.707107, 6.12323e-17},
                                            {0.5, 0.866025, 6.12323e-17},
                                            {0.258819, 0.965926, 6.12323e-17},
                                            {6.12323e-17, 1, 6.12323e-17},
                                            {-0.258819, 0.965926, 6.12323e-17},
                                            {-0.5, 0.866025, 6.12323e-17},
                                            {-0.707107, 0.707107, 6.12323e-17},
                                            {-0.866025, 0.5, 6.12323e-17},
                                            {-0.965926, 0.258819, 6.12323e-17},
                                            {-1, 1.22465e-16, 6.12323e-17},
                                            {-0.965926, -0.258819, 6.12323e-17},
                                            {-0.866025, -0.5, 6.12323e-17},
                                            {-0.707107, -0.707107, 6.12323e-17},
                                            {-0.5, -0.866025, 6.12323e-17},
                                            {-0.258819, -0.965926, 6.12323e-17},
                                            {-1.83697e-16, -1, 6.12323e-17},
                                            {0.258819, -0.965926, 6.12323e-17},
                                            {0.5, -0.866025, 6.12323e-17},
                                            {0.707107, -0.707107, 6.12323e-17},
                                            {0.866025, -0.5, 6.12323e-17},
                                            {0.965926, -0.258819, 6.12323e-17},
                                            {1, -2.44929e-16, 6.12323e-17},
                                            {0.965926, 0, -0.258819},
                                            {0.933013, 0.25, -0.258819},
                                            {0.836516, 0.482963, -0.258819},
                                            {0.683013, 0.683013, -0.258819},
                                            {0.482963, 0.836516, -0.258819},
                                            {0.25, 0.933013, -0.258819},
                                            {5.91459e-17, 0.965926, -0.258819},
                                            {-0.25, 0.933013, -0.258819},
                                            {-0.482963, 0.836516, -0.258819},
                                            {-0.683013, 0.683013, -0.258819},
                                            {-0.836516, 0.482963, -0.258819},
                                            {-0.933013, 0.25, -0.258819},
                                            {-0.965926, 1.18292e-16, -0.258819},
                                            {-0.933013, -0.25, -0.258819},
                                            {-0.836516, -0.482963, -0.258819},
                                            {-0.683013, -0.683013, -0.258819},
                                            {-0.482963, -0.836516, -0.258819},
                                            {-0.25, -0.933013, -0.258819},
                                            {-1.77438e-16, -0.965926, -0.258819},
                                            {0.25, -0.933013, -0.258819},
                                            {0.482963, -0.836516, -0.258819},
                                            {0.683013, -0.683013, -0.258819},
                                            {0.836516, -0.482963, -0.258819},
                                            {0.933013, -0.25, -0.258819},
                                            {0.965926, -2.36584e-16, -0.258819},
                                            {0.866025, 0, -0.5},
                                            {0.836516, 0.224144, -0.5},
                                            {0.75, 0.433013, -0.5},
                                            {0.612372, 0.612372, -0.5},
                                            {0.433013, 0.75, -0.5},
                                            {0.224144, 0.836516, -0.5},
                                            {5.30288e-17, 0.866025, -0.5},
                                            {-0.224144, 0.836516, -0.5},
                                            {-0.433013, 0.75, -0.5},
                                            {-0.612372, 0.612372, -0.5},
                                            {-0.75, 0.433013, -0.5},
                                            {-0.836516, 0.224144, -0.5},
                                            {-0.866025, 1.06058e-16, -0.5},
                                            {-0.836516, -0.224144, -0.5},
                                            {-0.75, -0.433013, -0.5},
                                            {-0.612372, -0.612372, -0.5},
                                            {-0.433013, -0.75, -0.5},
                                            {-0.224144, -0.836516, -0.5},
                                            {-1.59086e-16, -0.866025, -0.5},
                                            {0.224144, -0.836516, -0.5},
                                            {0.433013, -0.75, -0.5},
                                            {0.612372, -0.612372, -0.5},
                                            {0.75, -0.433013, -0.5},
                                            {0.836516, -0.224144, -0.5},
                                            {0.866025, -2.12115e-16, -0.5},
                                            {0.707107, 0, -0.707107},
                                            {0.683013, 0.183013, -0.707107},
                                            {0.612372, 0.353553, -0.707107},
                                            {0.5, 0.5, -0.707107},
                                            {0.353553, 0.612372, -0.707107},
                                            {0.183013, 0.683013, -0.707107},
                                            {4.32978e-17, 0.707107, -0.707107},
                                            {-0.183013, 0.683013, -0.707107},
                                            {-0.353553, 0.612372, -0.707107},
                                            {-0.5, 0.5, -0.707107},
                                            {-0.612372, 0.353553, -0.707107},
                                            {-0.683013, 0.183013, -0.707107},
                                            {-0.707107, 8.65956e-17, -0.707107},
                                            {-0.683013, -0.183013, -0.707107},
                                            {-0.612372, -0.353553, -0.707107},
                                            {-0.5, -0.5, -0.707107},
                                            {-0.353553, -0.612372, -0.707107},
                                            {-0.183013, -0.683013, -0.707107},
                                            {-1.29893e-16, -0.707107, -0.707107},
                                            {0.183013, -0.683013, -0.707107},
                                            {0.353553, -0.612372, -0.707107},
                                            {0.5, -0.5, -0.707107},
                                            {0.612372, -0.353553, -0.707107},
                                            {0.683013, -0.183013, -0.707107},
                                            {0.707107, -1.73191e-16, -0.707107},
                                            {0.5, 0, -0.866025},
                                            {0.482963, 0.12941, -0.866025},
                                            {0.433013, 0.25, -0.866025},
                                            {0.353553, 0.353553, -0.866025},
                                            {0.25, 0.433013, -0.866025},
                                            {0.12941, 0.482963, -0.866025},
                                            {3.06162e-17, 0.5, -0.866025},
                                            {-0.12941, 0.482963, -0.866025},
                                            {-0.25, 0.433013, -0.866025},
                                            {-0.353553, 0.353553, -0.866025},
                                            {-0.433013, 0.25, -0.866025},
                                            {-0.482963, 0.12941, -0.866025},
                                            {-0.5, 6.12323e-17, -0.866025},
                                            {-0.482963, -0.12941, -0.866025},
                                            {-0.433013, -0.25, -0.866025},
                                            {-0.353553, -0.353553, -0.866025},
                                            {-0.25, -0.433013, -0.866025},
                                            {-0.12941, -0.482963, -0.866025},
                                            {-9.18485e-17, -0.5, -0.866025},
                                            {0.12941, -0.482963, -0.866025},
                                            {0.25, -0.433013, -0.866025},
                                            {0.353553, -0.353553, -0.866025},
                                            {0.433013, -0.25, -0.866025},
                                            {0.482963, -0.12941, -0.866025},
                                            {0.5, -1.22465e-16, -0.866025},
                                            {0.258819, 0, -0.965926},
                                            {0.25, 0.0669873, -0.965926},
                                            {0.224144, 0.12941, -0.965926},
                                            {0.183013, 0.183013, -0.965926},
                                            {0.12941, 0.224144, -0.965926},
                                            {0.0669873, 0.25, -0.965926},
                                            {1.58481e-17, 0.258819, -0.965926},
                                            {-0.0669873, 0.25, -0.965926},
                                            {-0.12941, 0.224144, -0.965926},
                                            {-0.183013, 0.183013, -0.965926},
                                            {-0.224144, 0.12941, -0.965926},
                                            {-0.25, 0.0669873, -0.965926},
                                            {-0.258819, 3.16962e-17, -0.965926},
                                            {-0.25, -0.0669873, -0.965926},
                                            {-0.224144, -0.12941, -0.965926},
                                            {-0.183013, -0.183013, -0.965926},
                                            {-0.12941, -0.224144, -0.965926},
                                            {-0.0669873, -0.25, -0.965926},
                                            {-4.75443e-17, -0.258819, -0.965926},
                                            {0.0669873, -0.25, -0.965926},
                                            {0.12941, -0.224144, -0.965926},
                                            {0.183013, -0.183013, -0.965926},
                                            {0.224144, -0.12941, -0.965926},
                                            {0.25, -0.0669873, -0.965926},
                                            {0.258819, -6.33924e-17, -0.965926}});

#if 0
    auto normals = vsg::vec3Array::create({{0, 0, 1},
                                           {0, 0, -1},
                                           {0.258819, 0, 0.965926},
                                           {0.25, 0.0669873, 0.965926},
                                           {0.224144, 0.12941, 0.965926},
                                           {0.183013, 0.183013, 0.965926},
                                           {0.12941, 0.224144, 0.965926},
                                           {0.0669873, 0.25, 0.965926},
                                           {1.58481e-17, 0.258819, 0.965926},
                                           {-0.0669873, 0.25, 0.965926},
                                           {-0.12941, 0.224144, 0.965926},
                                           {-0.183013, 0.183013, 0.965926},
                                           {-0.224144, 0.12941, 0.965926},
                                           {-0.25, 0.0669873, 0.965926},
                                           {-0.258819, 3.16962e-17, 0.965926},
                                           {-0.25, -0.0669873, 0.965926},
                                           {-0.224144, -0.12941, 0.965926},
                                           {-0.183013, -0.183013, 0.965926},
                                           {-0.12941, -0.224144, 0.965926},
                                           {-0.0669873, -0.25, 0.965926},
                                           {-4.75443e-17, -0.258819, 0.965926},
                                           {0.0669873, -0.25, 0.965926},
                                           {0.12941, -0.224144, 0.965926},
                                           {0.183013, -0.183013, 0.965926},
                                           {0.224144, -0.12941, 0.965926},
                                           {0.25, -0.0669873, 0.965926},
                                           {0.258819, -6.33924e-17, 0.965926},
                                           {0.5, 0, 0.866025},
                                           {0.482963, 0.12941, 0.866025},
                                           {0.433013, 0.25, 0.866025},
                                           {0.353553, 0.353553, 0.866025},
                                           {0.25, 0.433013, 0.866025},
                                           {0.12941, 0.482963, 0.866025},
                                           {3.06162e-17, 0.5, 0.866025},
                                           {-0.12941, 0.482963, 0.866025},
                                           {-0.25, 0.433013, 0.866025},
                                           {-0.353553, 0.353553, 0.866025},
                                           {-0.433013, 0.25, 0.866025},
                                           {-0.482963, 0.12941, 0.866025},
                                           {-0.5, 6.12323e-17, 0.866025},
                                           {-0.482963, -0.12941, 0.866025},
                                           {-0.433013, -0.25, 0.866025},
                                           {-0.353553, -0.353553, 0.866025},
                                           {-0.25, -0.433013, 0.866025},
                                           {-0.12941, -0.482963, 0.866025},
                                           {-9.18485e-17, -0.5, 0.866025},
                                           {0.12941, -0.482963, 0.866025},
                                           {0.25, -0.433013, 0.866025},
                                           {0.353553, -0.353553, 0.866025},
                                           {0.433013, -0.25, 0.866025},
                                           {0.482963, -0.12941, 0.866025},
                                           {0.5, -1.22465e-16, 0.866025},
                                           {0.707107, 0, 0.707107},
                                           {0.683013, 0.183013, 0.707107},
                                           {0.612372, 0.353553, 0.707107},
                                           {0.5, 0.5, 0.707107},
                                           {0.353553, 0.612372, 0.707107},
                                           {0.183013, 0.683013, 0.707107},
                                           {4.32978e-17, 0.707107, 0.707107},
                                           {-0.183013, 0.683013, 0.707107},
                                           {-0.353553, 0.612372, 0.707107},
                                           {-0.5, 0.5, 0.707107},
                                           {-0.612372, 0.353553, 0.707107},
                                           {-0.683013, 0.183013, 0.707107},
                                           {-0.707107, 8.65956e-17, 0.707107},
                                           {-0.683013, -0.183013, 0.707107},
                                           {-0.612372, -0.353553, 0.707107},
                                           {-0.5, -0.5, 0.707107},
                                           {-0.353553, -0.612372, 0.707107},
                                           {-0.183013, -0.683013, 0.707107},
                                           {-1.29893e-16, -0.707107, 0.707107},
                                           {0.183013, -0.683013, 0.707107},
                                           {0.353553, -0.612372, 0.707107},
                                           {0.5, -0.5, 0.707107},
                                           {0.612372, -0.353553, 0.707107},
                                           {0.683013, -0.183013, 0.707107},
                                           {0.707107, -1.73191e-16, 0.707107},
                                           {0.866025, 0, 0.5},
                                           {0.836516, 0.224144, 0.5},
                                           {0.75, 0.433013, 0.5},
                                           {0.612372, 0.612372, 0.5},
                                           {0.433013, 0.75, 0.5},
                                           {0.224144, 0.836516, 0.5},
                                           {5.30288e-17, 0.866025, 0.5},
                                           {-0.224144, 0.836516, 0.5},
                                           {-0.433013, 0.75, 0.5},
                                           {-0.612372, 0.612372, 0.5},
                                           {-0.75, 0.433013, 0.5},
                                           {-0.836516, 0.224144, 0.5},
                                           {-0.866025, 1.06058e-16, 0.5},
                                           {-0.836516, -0.224144, 0.5},
                                           {-0.75, -0.433013, 0.5},
                                           {-0.612372, -0.612372, 0.5},
                                           {-0.433013, -0.75, 0.5},
                                           {-0.224144, -0.836516, 0.5},
                                           {-1.59086e-16, -0.866025, 0.5},
                                           {0.224144, -0.836516, 0.5},
                                           {0.433013, -0.75, 0.5},
                                           {0.612372, -0.612372, 0.5},
                                           {0.75, -0.433013, 0.5},
                                           {0.836516, -0.224144, 0.5},
                                           {0.866025, -2.12115e-16, 0.5},
                                           {0.965926, 0, 0.258819},
                                           {0.933013, 0.25, 0.258819},
                                           {0.836516, 0.482963, 0.258819},
                                           {0.683013, 0.683013, 0.258819},
                                           {0.482963, 0.836516, 0.258819},
                                           {0.25, 0.933013, 0.258819},
                                           {5.91459e-17, 0.965926, 0.258819},
                                           {-0.25, 0.933013, 0.258819},
                                           {-0.482963, 0.836516, 0.258819},
                                           {-0.683013, 0.683013, 0.258819},
                                           {-0.836516, 0.482963, 0.258819},
                                           {-0.933013, 0.25, 0.258819},
                                           {-0.965926, 1.18292e-16, 0.258819},
                                           {-0.933013, -0.25, 0.258819},
                                           {-0.836516, -0.482963, 0.258819},
                                           {-0.683013, -0.683013, 0.258819},
                                           {-0.482963, -0.836516, 0.258819},
                                           {-0.25, -0.933013, 0.258819},
                                           {-1.77438e-16, -0.965926, 0.258819},
                                           {0.25, -0.933013, 0.258819},
                                           {0.482963, -0.836516, 0.258819},
                                           {0.683013, -0.683013, 0.258819},
                                           {0.836516, -0.482963, 0.258819},
                                           {0.933013, -0.25, 0.258819},
                                           {0.965926, -2.36584e-16, 0.258819},
                                           {1, 0, 6.12323e-17},
                                           {0.965926, 0.258819, 6.12323e-17},
                                           {0.866025, 0.5, 6.12323e-17},
                                           {0.707107, 0.707107, 6.12323e-17},
                                           {0.5, 0.866025, 6.12323e-17},
                                           {0.258819, 0.965926, 6.12323e-17},
                                           {6.12323e-17, 1, 6.12323e-17},
                                           {-0.258819, 0.965926, 6.12323e-17},
                                           {-0.5, 0.866025, 6.12323e-17},
                                           {-0.707107, 0.707107, 6.12323e-17},
                                           {-0.866025, 0.5, 6.12323e-17},
                                           {-0.965926, 0.258819, 6.12323e-17},
                                           {-1, 1.22465e-16, 6.12323e-17},
                                           {-0.965926, -0.258819, 6.12323e-17},
                                           {-0.866025, -0.5, 6.12323e-17},
                                           {-0.707107, -0.707107, 6.12323e-17},
                                           {-0.5, -0.866025, 6.12323e-17},
                                           {-0.258819, -0.965926, 6.12323e-17},
                                           {-1.83697e-16, -1, 6.12323e-17},
                                           {0.258819, -0.965926, 6.12323e-17},
                                           {0.5, -0.866025, 6.12323e-17},
                                           {0.707107, -0.707107, 6.12323e-17},
                                           {0.866025, -0.5, 6.12323e-17},
                                           {0.965926, -0.258819, 6.12323e-17},
                                           {1, -2.44929e-16, 6.12323e-17},
                                           {0.965926, 0, -0.258819},
                                           {0.933013, 0.25, -0.258819},
                                           {0.836516, 0.482963, -0.258819},
                                           {0.683013, 0.683013, -0.258819},
                                           {0.482963, 0.836516, -0.258819},
                                           {0.25, 0.933013, -0.258819},
                                           {5.91459e-17, 0.965926, -0.258819},
                                           {-0.25, 0.933013, -0.258819},
                                           {-0.482963, 0.836516, -0.258819},
                                           {-0.683013, 0.683013, -0.258819},
                                           {-0.836516, 0.482963, -0.258819},
                                           {-0.933013, 0.25, -0.258819},
                                           {-0.965926, 1.18292e-16, -0.258819},
                                           {-0.933013, -0.25, -0.258819},
                                           {-0.836516, -0.482963, -0.258819},
                                           {-0.683013, -0.683013, -0.258819},
                                           {-0.482963, -0.836516, -0.258819},
                                           {-0.25, -0.933013, -0.258819},
                                           {-1.77438e-16, -0.965926, -0.258819},
                                           {0.25, -0.933013, -0.258819},
                                           {0.482963, -0.836516, -0.258819},
                                           {0.683013, -0.683013, -0.258819},
                                           {0.836516, -0.482963, -0.258819},
                                           {0.933013, -0.25, -0.258819},
                                           {0.965926, -2.36584e-16, -0.258819},
                                           {0.866025, 0, -0.5},
                                           {0.836516, 0.224144, -0.5},
                                           {0.75, 0.433013, -0.5},
                                           {0.612372, 0.612372, -0.5},
                                           {0.433013, 0.75, -0.5},
                                           {0.224144, 0.836516, -0.5},
                                           {5.30288e-17, 0.866025, -0.5},
                                           {-0.224144, 0.836516, -0.5},
                                           {-0.433013, 0.75, -0.5},
                                           {-0.612372, 0.612372, -0.5},
                                           {-0.75, 0.433013, -0.5},
                                           {-0.836516, 0.224144, -0.5},
                                           {-0.866025, 1.06058e-16, -0.5},
                                           {-0.836516, -0.224144, -0.5},
                                           {-0.75, -0.433013, -0.5},
                                           {-0.612372, -0.612372, -0.5},
                                           {-0.433013, -0.75, -0.5},
                                           {-0.224144, -0.836516, -0.5},
                                           {-1.59086e-16, -0.866025, -0.5},
                                           {0.224144, -0.836516, -0.5},
                                           {0.433013, -0.75, -0.5},
                                           {0.612372, -0.612372, -0.5},
                                           {0.75, -0.433013, -0.5},
                                           {0.836516, -0.224144, -0.5},
                                           {0.866025, -2.12115e-16, -0.5},
                                           {0.707107, 0, -0.707107},
                                           {0.683013, 0.183013, -0.707107},
                                           {0.612372, 0.353553, -0.707107},
                                           {0.5, 0.5, -0.707107},
                                           {0.353553, 0.612372, -0.707107},
                                           {0.183013, 0.683013, -0.707107},
                                           {4.32978e-17, 0.707107, -0.707107},
                                           {-0.183013, 0.683013, -0.707107},
                                           {-0.353553, 0.612372, -0.707107},
                                           {-0.5, 0.5, -0.707107},
                                           {-0.612372, 0.353553, -0.707107},
                                           {-0.683013, 0.183013, -0.707107},
                                           {-0.707107, 8.65956e-17, -0.707107},
                                           {-0.683013, -0.183013, -0.707107},
                                           {-0.612372, -0.353553, -0.707107},
                                           {-0.5, -0.5, -0.707107},
                                           {-0.353553, -0.612372, -0.707107},
                                           {-0.183013, -0.683013, -0.707107},
                                           {-1.29893e-16, -0.707107, -0.707107},
                                           {0.183013, -0.683013, -0.707107},
                                           {0.353553, -0.612372, -0.707107},
                                           {0.5, -0.5, -0.707107},
                                           {0.612372, -0.353553, -0.707107},
                                           {0.683013, -0.183013, -0.707107},
                                           {0.707107, -1.73191e-16, -0.707107},
                                           {0.5, 0, -0.866025},
                                           {0.482963, 0.12941, -0.866025},
                                           {0.433013, 0.25, -0.866025},
                                           {0.353553, 0.353553, -0.866025},
                                           {0.25, 0.433013, -0.866025},
                                           {0.12941, 0.482963, -0.866025},
                                           {3.06162e-17, 0.5, -0.866025},
                                           {-0.12941, 0.482963, -0.866025},
                                           {-0.25, 0.433013, -0.866025},
                                           {-0.353553, 0.353553, -0.866025},
                                           {-0.433013, 0.25, -0.866025},
                                           {-0.482963, 0.12941, -0.866025},
                                           {-0.5, 6.12323e-17, -0.866025},
                                           {-0.482963, -0.12941, -0.866025},
                                           {-0.433013, -0.25, -0.866025},
                                           {-0.353553, -0.353553, -0.866025},
                                           {-0.25, -0.433013, -0.866025},
                                           {-0.12941, -0.482963, -0.866025},
                                           {-9.18485e-17, -0.5, -0.866025},
                                           {0.12941, -0.482963, -0.866025},
                                           {0.25, -0.433013, -0.866025},
                                           {0.353553, -0.353553, -0.866025},
                                           {0.433013, -0.25, -0.866025},
                                           {0.482963, -0.12941, -0.866025},
                                           {0.5, -1.22465e-16, -0.866025},
                                           {0.258819, 0, -0.965926},
                                           {0.25, 0.0669873, -0.965926},
                                           {0.224144, 0.12941, -0.965926},
                                           {0.183013, 0.183013, -0.965926},
                                           {0.12941, 0.224144, -0.965926},
                                           {0.0669873, 0.25, -0.965926},
                                           {1.58481e-17, 0.258819, -0.965926},
                                           {-0.0669873, 0.25, -0.965926},
                                           {-0.12941, 0.224144, -0.965926},
                                           {-0.183013, 0.183013, -0.965926},
                                           {-0.224144, 0.12941, -0.965926},
                                           {-0.25, 0.0669873, -0.965926},
                                           {-0.258819, 3.16962e-17, -0.965926},
                                           {-0.25, -0.0669873, -0.965926},
                                           {-0.224144, -0.12941, -0.965926},
                                           {-0.183013, -0.183013, -0.965926},
                                           {-0.12941, -0.224144, -0.965926},
                                           {-0.0669873, -0.25, -0.965926},
                                           {-4.75443e-17, -0.258819, -0.965926},
                                           {0.0669873, -0.25, -0.965926},
                                           {0.12941, -0.224144, -0.965926},
                                           {0.183013, -0.183013, -0.965926},
                                           {0.224144, -0.12941, -0.965926},
                                           {0.25, -0.0669873, -0.965926},
                                           {0.258819, -6.33924e-17, -0.965926}});
#endif

    auto colors = vsg::vec4Array::create(vertices->size(), color);

    auto texcoords = vsg::vec2Array::create({{0.5, 0},
                                             {0.5, 0},
                                             {0, 0.982963},
                                             {0.0416667, 0.982963},
                                             {0.0833333, 0.982963},
                                             {0.125, 0.982963},
                                             {0.166667, 0.982963},
                                             {0.208333, 0.982963},
                                             {0.25, 0.982963},
                                             {0.291667, 0.982963},
                                             {0.333333, 0.982963},
                                             {0.375, 0.982963},
                                             {0.416667, 0.982963},
                                             {0.458333, 0.982963},
                                             {0.5, 0.982963},
                                             {0.541667, 0.982963},
                                             {0.583333, 0.982963},
                                             {0.625, 0.982963},
                                             {0.666667, 0.982963},
                                             {0.708333, 0.982963},
                                             {0.75, 0.982963},
                                             {0.791667, 0.982963},
                                             {0.833333, 0.982963},
                                             {0.875, 0.982963},
                                             {0.916667, 0.982963},
                                             {0.958333, 0.982963},
                                             {1, 0.982963},
                                             {0, 0.933013},
                                             {0.0416667, 0.933013},
                                             {0.0833333, 0.933013},
                                             {0.125, 0.933013},
                                             {0.166667, 0.933013},
                                             {0.208333, 0.933013},
                                             {0.25, 0.933013},
                                             {0.291667, 0.933013},
                                             {0.333333, 0.933013},
                                             {0.375, 0.933013},
                                             {0.416667, 0.933013},
                                             {0.458333, 0.933013},
                                             {0.5, 0.933013},
                                             {0.541667, 0.933013},
                                             {0.583333, 0.933013},
                                             {0.625, 0.933013},
                                             {0.666667, 0.933013},
                                             {0.708333, 0.933013},
                                             {0.75, 0.933013},
                                             {0.791667, 0.933013},
                                             {0.833333, 0.933013},
                                             {0.875, 0.933013},
                                             {0.916667, 0.933013},
                                             {0.958333, 0.933013},
                                             {1, 0.933013},
                                             {0, 0.853553},
                                             {0.0416667, 0.853553},
                                             {0.0833333, 0.853553},
                                             {0.125, 0.853553},
                                             {0.166667, 0.853553},
                                             {0.208333, 0.853553},
                                             {0.25, 0.853553},
                                             {0.291667, 0.853553},
                                             {0.333333, 0.853553},
                                             {0.375, 0.853553},
                                             {0.416667, 0.853553},
                                             {0.458333, 0.853553},
                                             {0.5, 0.853553},
                                             {0.541667, 0.853553},
                                             {0.583333, 0.853553},
                                             {0.625, 0.853553},
                                             {0.666667, 0.853553},
                                             {0.708333, 0.853553},
                                             {0.75, 0.853553},
                                             {0.791667, 0.853553},
                                             {0.833333, 0.853553},
                                             {0.875, 0.853553},
                                             {0.916667, 0.853553},
                                             {0.958333, 0.853553},
                                             {1, 0.853553},
                                             {0, 0.75},
                                             {0.0416667, 0.75},
                                             {0.0833333, 0.75},
                                             {0.125, 0.75},
                                             {0.166667, 0.75},
                                             {0.208333, 0.75},
                                             {0.25, 0.75},
                                             {0.291667, 0.75},
                                             {0.333333, 0.75},
                                             {0.375, 0.75},
                                             {0.416667, 0.75},
                                             {0.458333, 0.75},
                                             {0.5, 0.75},
                                             {0.541667, 0.75},
                                             {0.583333, 0.75},
                                             {0.625, 0.75},
                                             {0.666667, 0.75},
                                             {0.708333, 0.75},
                                             {0.75, 0.75},
                                             {0.791667, 0.75},
                                             {0.833333, 0.75},
                                             {0.875, 0.75},
                                             {0.916667, 0.75},
                                             {0.958333, 0.75},
                                             {1, 0.75},
                                             {0, 0.62941},
                                             {0.0416667, 0.62941},
                                             {0.0833333, 0.62941},
                                             {0.125, 0.62941},
                                             {0.166667, 0.62941},
                                             {0.208333, 0.62941},
                                             {0.25, 0.62941},
                                             {0.291667, 0.62941},
                                             {0.333333, 0.62941},
                                             {0.375, 0.62941},
                                             {0.416667, 0.62941},
                                             {0.458333, 0.62941},
                                             {0.5, 0.62941},
                                             {0.541667, 0.62941},
                                             {0.583333, 0.62941},
                                             {0.625, 0.62941},
                                             {0.666667, 0.62941},
                                             {0.708333, 0.62941},
                                             {0.75, 0.62941},
                                             {0.791667, 0.62941},
                                             {0.833333, 0.62941},
                                             {0.875, 0.62941},
                                             {0.916667, 0.62941},
                                             {0.958333, 0.62941},
                                             {1, 0.62941},
                                             {0, 0.5},
                                             {0.0416667, 0.5},
                                             {0.0833333, 0.5},
                                             {0.125, 0.5},
                                             {0.166667, 0.5},
                                             {0.208333, 0.5},
                                             {0.25, 0.5},
                                             {0.291667, 0.5},
                                             {0.333333, 0.5},
                                             {0.375, 0.5},
                                             {0.416667, 0.5},
                                             {0.458333, 0.5},
                                             {0.5, 0.5},
                                             {0.541667, 0.5},
                                             {0.583333, 0.5},
                                             {0.625, 0.5},
                                             {0.666667, 0.5},
                                             {0.708333, 0.5},
                                             {0.75, 0.5},
                                             {0.791667, 0.5},
                                             {0.833333, 0.5},
                                             {0.875, 0.5},
                                             {0.916667, 0.5},
                                             {0.958333, 0.5},
                                             {1, 0.5},
                                             {0, 0.37059},
                                             {0.0416667, 0.37059},
                                             {0.0833333, 0.37059},
                                             {0.125, 0.37059},
                                             {0.166667, 0.37059},
                                             {0.208333, 0.37059},
                                             {0.25, 0.37059},
                                             {0.291667, 0.37059},
                                             {0.333333, 0.37059},
                                             {0.375, 0.37059},
                                             {0.416667, 0.37059},
                                             {0.458333, 0.37059},
                                             {0.5, 0.37059},
                                             {0.541667, 0.37059},
                                             {0.583333, 0.37059},
                                             {0.625, 0.37059},
                                             {0.666667, 0.37059},
                                             {0.708333, 0.37059},
                                             {0.75, 0.37059},
                                             {0.791667, 0.37059},
                                             {0.833333, 0.37059},
                                             {0.875, 0.37059},
                                             {0.916667, 0.37059},
                                             {0.958333, 0.37059},
                                             {1, 0.37059},
                                             {0, 0.25},
                                             {0.0416667, 0.25},
                                             {0.0833333, 0.25},
                                             {0.125, 0.25},
                                             {0.166667, 0.25},
                                             {0.208333, 0.25},
                                             {0.25, 0.25},
                                             {0.291667, 0.25},
                                             {0.333333, 0.25},
                                             {0.375, 0.25},
                                             {0.416667, 0.25},
                                             {0.458333, 0.25},
                                             {0.5, 0.25},
                                             {0.541667, 0.25},
                                             {0.583333, 0.25},
                                             {0.625, 0.25},
                                             {0.666667, 0.25},
                                             {0.708333, 0.25},
                                             {0.75, 0.25},
                                             {0.791667, 0.25},
                                             {0.833333, 0.25},
                                             {0.875, 0.25},
                                             {0.916667, 0.25},
                                             {0.958333, 0.25},
                                             {1, 0.25},
                                             {0, 0.146447},
                                             {0.0416667, 0.146447},
                                             {0.0833333, 0.146447},
                                             {0.125, 0.146447},
                                             {0.166667, 0.146447},
                                             {0.208333, 0.146447},
                                             {0.25, 0.146447},
                                             {0.291667, 0.146447},
                                             {0.333333, 0.146447},
                                             {0.375, 0.146447},
                                             {0.416667, 0.146447},
                                             {0.458333, 0.146447},
                                             {0.5, 0.146447},
                                             {0.541667, 0.146447},
                                             {0.583333, 0.146447},
                                             {0.625, 0.146447},
                                             {0.666667, 0.146447},
                                             {0.708333, 0.146447},
                                             {0.75, 0.146447},
                                             {0.791667, 0.146447},
                                             {0.833333, 0.146447},
                                             {0.875, 0.146447},
                                             {0.916667, 0.146447},
                                             {0.958333, 0.146447},
                                             {1, 0.146447},
                                             {0, 0.0669873},
                                             {0.0416667, 0.0669873},
                                             {0.0833333, 0.0669873},
                                             {0.125, 0.0669873},
                                             {0.166667, 0.0669873},
                                             {0.208333, 0.0669873},
                                             {0.25, 0.0669873},
                                             {0.291667, 0.0669873},
                                             {0.333333, 0.0669873},
                                             {0.375, 0.0669873},
                                             {0.416667, 0.0669873},
                                             {0.458333, 0.0669873},
                                             {0.5, 0.0669873},
                                             {0.541667, 0.0669873},
                                             {0.583333, 0.0669873},
                                             {0.625, 0.0669873},
                                             {0.666667, 0.0669873},
                                             {0.708333, 0.0669873},
                                             {0.75, 0.0669873},
                                             {0.791667, 0.0669873},
                                             {0.833333, 0.0669873},
                                             {0.875, 0.0669873},
                                             {0.916667, 0.0669873},
                                             {0.958333, 0.0669873},
                                             {1, 0.0669873},
                                             {0, 0.0170371},
                                             {0.0416667, 0.0170371},
                                             {0.0833333, 0.0170371},
                                             {0.125, 0.0170371},
                                             {0.166667, 0.0170371},
                                             {0.208333, 0.0170371},
                                             {0.25, 0.0170371},
                                             {0.291667, 0.0170371},
                                             {0.333333, 0.0170371},
                                             {0.375, 0.0170371},
                                             {0.416667, 0.0170371},
                                             {0.458333, 0.0170371},
                                             {0.5, 0.0170371},
                                             {0.541667, 0.0170371},
                                             {0.583333, 0.0170371},
                                             {0.625, 0.0170371},
                                             {0.666667, 0.0170371},
                                             {0.708333, 0.0170371},
                                             {0.75, 0.0170371},
                                             {0.791667, 0.0170371},
                                             {0.833333, 0.0170371},
                                             {0.875, 0.0170371},
                                             {0.916667, 0.0170371},
                                             {0.958333, 0.0170371},
                                             {1, 0.0170371}});

    auto indices = vsg::ushortArray::create(
        {0,   2,   3,   0,   3,   4,   0,   4,   5,   0,   5,   6,   0,   6,   7,   0,   7,   8,   0,   8,   9,   0,
         9,   10,  0,   10,  11,  0,   11,  12,  0,   12,  13,  0,   13,  14,  0,   14,  15,  0,   15,  16,  0,   16,
         17,  0,   17,  18,  0,   18,  19,  0,   19,  20,  0,   20,  21,  0,   21,  22,  0,   22,  23,  0,   23,  24,
         0,   24,  25,  0,   25,  26,  1,   253, 252, 1,   254, 253, 1,   255, 254, 1,   256, 255, 1,   257, 256, 1,
         258, 257, 1,   259, 258, 1,   260, 259, 1,   261, 260, 1,   262, 261, 1,   263, 262, 1,   264, 263, 1,   265,
         264, 1,   266, 265, 1,   267, 266, 1,   268, 267, 1,   269, 268, 1,   270, 269, 1,   271, 270, 1,   272, 271,
         1,   273, 272, 1,   274, 273, 1,   275, 274, 1,   276, 275, 2,   27,  28,  2,   28,  3,   3,   28,  29,  3,
         29,  4,   4,   29,  30,  4,   30,  5,   5,   30,  31,  5,   31,  6,   6,   31,  32,  6,   32,  7,   7,   32,
         33,  7,   33,  8,   8,   33,  34,  8,   34,  9,   9,   34,  35,  9,   35,  10,  10,  35,  36,  10,  36,  11,
         11,  36,  37,  11,  37,  12,  12,  37,  38,  12,  38,  13,  13,  38,  39,  13,  39,  14,  14,  39,  40,  14,
         40,  15,  15,  40,  41,  15,  41,  16,  16,  41,  42,  16,  42,  17,  17,  42,  43,  17,  43,  18,  18,  43,
         44,  18,  44,  19,  19,  44,  45,  19,  45,  20,  20,  45,  46,  20,  46,  21,  21,  46,  47,  21,  47,  22,
         22,  47,  48,  22,  48,  23,  23,  48,  49,  23,  49,  24,  24,  49,  50,  24,  50,  25,  25,  50,  51,  25,
         51,  26,  27,  52,  53,  27,  53,  28,  28,  53,  54,  28,  54,  29,  29,  54,  55,  29,  55,  30,  30,  55,
         56,  30,  56,  31,  31,  56,  57,  31,  57,  32,  32,  57,  58,  32,  58,  33,  33,  58,  59,  33,  59,  34,
         34,  59,  60,  34,  60,  35,  35,  60,  61,  35,  61,  36,  36,  61,  62,  36,  62,  37,  37,  62,  63,  37,
         63,  38,  38,  63,  64,  38,  64,  39,  39,  64,  65,  39,  65,  40,  40,  65,  66,  40,  66,  41,  41,  66,
         67,  41,  67,  42,  42,  67,  68,  42,  68,  43,  43,  68,  69,  43,  69,  44,  44,  69,  70,  44,  70,  45,
         45,  70,  71,  45,  71,  46,  46,  71,  72,  46,  72,  47,  47,  72,  73,  47,  73,  48,  48,  73,  74,  48,
         74,  49,  49,  74,  75,  49,  75,  50,  50,  75,  76,  50,  76,  51,  52,  77,  78,  52,  78,  53,  53,  78,
         79,  53,  79,  54,  54,  79,  80,  54,  80,  55,  55,  80,  81,  55,  81,  56,  56,  81,  82,  56,  82,  57,
         57,  82,  83,  57,  83,  58,  58,  83,  84,  58,  84,  59,  59,  84,  85,  59,  85,  60,  60,  85,  86,  60,
         86,  61,  61,  86,  87,  61,  87,  62,  62,  87,  88,  62,  88,  63,  63,  88,  89,  63,  89,  64,  64,  89,
         90,  64,  90,  65,  65,  90,  91,  65,  91,  66,  66,  91,  92,  66,  92,  67,  67,  92,  93,  67,  93,  68,
         68,  93,  94,  68,  94,  69,  69,  94,  95,  69,  95,  70,  70,  95,  96,  70,  96,  71,  71,  96,  97,  71,
         97,  72,  72,  97,  98,  72,  98,  73,  73,  98,  99,  73,  99,  74,  74,  99,  100, 74,  100, 75,  75,  100,
         101, 75,  101, 76,  77,  102, 103, 77,  103, 78,  78,  103, 104, 78,  104, 79,  79,  104, 105, 79,  105, 80,
         80,  105, 106, 80,  106, 81,  81,  106, 107, 81,  107, 82,  82,  107, 108, 82,  108, 83,  83,  108, 109, 83,
         109, 84,  84,  109, 110, 84,  110, 85,  85,  110, 111, 85,  111, 86,  86,  111, 112, 86,  112, 87,  87,  112,
         113, 87,  113, 88,  88,  113, 114, 88,  114, 89,  89,  114, 115, 89,  115, 90,  90,  115, 116, 90,  116, 91,
         91,  116, 117, 91,  117, 92,  92,  117, 118, 92,  118, 93,  93,  118, 119, 93,  119, 94,  94,  119, 120, 94,
         120, 95,  95,  120, 121, 95,  121, 96,  96,  121, 122, 96,  122, 97,  97,  122, 123, 97,  123, 98,  98,  123,
         124, 98,  124, 99,  99,  124, 125, 99,  125, 100, 100, 125, 126, 100, 126, 101, 102, 127, 128, 102, 128, 103,
         103, 128, 129, 103, 129, 104, 104, 129, 130, 104, 130, 105, 105, 130, 131, 105, 131, 106, 106, 131, 132, 106,
         132, 107, 107, 132, 133, 107, 133, 108, 108, 133, 134, 108, 134, 109, 109, 134, 135, 109, 135, 110, 110, 135,
         136, 110, 136, 111, 111, 136, 137, 111, 137, 112, 112, 137, 138, 112, 138, 113, 113, 138, 139, 113, 139, 114,
         114, 139, 140, 114, 140, 115, 115, 140, 141, 115, 141, 116, 116, 141, 142, 116, 142, 117, 117, 142, 143, 117,
         143, 118, 118, 143, 144, 118, 144, 119, 119, 144, 145, 119, 145, 120, 120, 145, 146, 120, 146, 121, 121, 146,
         147, 121, 147, 122, 122, 147, 148, 122, 148, 123, 123, 148, 149, 123, 149, 124, 124, 149, 150, 124, 150, 125,
         125, 150, 151, 125, 151, 126, 127, 152, 153, 127, 153, 128, 128, 153, 154, 128, 154, 129, 129, 154, 155, 129,
         155, 130, 130, 155, 156, 130, 156, 131, 131, 156, 157, 131, 157, 132, 132, 157, 158, 132, 158, 133, 133, 158,
         159, 133, 159, 134, 134, 159, 160, 134, 160, 135, 135, 160, 161, 135, 161, 136, 136, 161, 162, 136, 162, 137,
         137, 162, 163, 137, 163, 138, 138, 163, 164, 138, 164, 139, 139, 164, 165, 139, 165, 140, 140, 165, 166, 140,
         166, 141, 141, 166, 167, 141, 167, 142, 142, 167, 168, 142, 168, 143, 143, 168, 169, 143, 169, 144, 144, 169,
         170, 144, 170, 145, 145, 170, 171, 145, 171, 146, 146, 171, 172, 146, 172, 147, 147, 172, 173, 147, 173, 148,
         148, 173, 174, 148, 174, 149, 149, 174, 175, 149, 175, 150, 150, 175, 176, 150, 176, 151, 152, 177, 178, 152,
         178, 153, 153, 178, 179, 153, 179, 154, 154, 179, 180, 154, 180, 155, 155, 180, 181, 155, 181, 156, 156, 181,
         182, 156, 182, 157, 157, 182, 183, 157, 183, 158, 158, 183, 184, 158, 184, 159, 159, 184, 185, 159, 185, 160,
         160, 185, 186, 160, 186, 161, 161, 186, 187, 161, 187, 162, 162, 187, 188, 162, 188, 163, 163, 188, 189, 163,
         189, 164, 164, 189, 190, 164, 190, 165, 165, 190, 191, 165, 191, 166, 166, 191, 192, 166, 192, 167, 167, 192,
         193, 167, 193, 168, 168, 193, 194, 168, 194, 169, 169, 194, 195, 169, 195, 170, 170, 195, 196, 170, 196, 171,
         171, 196, 197, 171, 197, 172, 172, 197, 198, 172, 198, 173, 173, 198, 199, 173, 199, 174, 174, 199, 200, 174,
         200, 175, 175, 200, 201, 175, 201, 176, 177, 202, 203, 177, 203, 178, 178, 203, 204, 178, 204, 179, 179, 204,
         205, 179, 205, 180, 180, 205, 206, 180, 206, 181, 181, 206, 207, 181, 207, 182, 182, 207, 208, 182, 208, 183,
         183, 208, 209, 183, 209, 184, 184, 209, 210, 184, 210, 185, 185, 210, 211, 185, 211, 186, 186, 211, 212, 186,
         212, 187, 187, 212, 213, 187, 213, 188, 188, 213, 214, 188, 214, 189, 189, 214, 215, 189, 215, 190, 190, 215,
         216, 190, 216, 191, 191, 216, 217, 191, 217, 192, 192, 217, 218, 192, 218, 193, 193, 218, 219, 193, 219, 194,
         194, 219, 220, 194, 220, 195, 195, 220, 221, 195, 221, 196, 196, 221, 222, 196, 222, 197, 197, 222, 223, 197,
         223, 198, 198, 223, 224, 198, 224, 199, 199, 224, 225, 199, 225, 200, 200, 225, 226, 200, 226, 201, 202, 227,
         228, 202, 228, 203, 203, 228, 229, 203, 229, 204, 204, 229, 230, 204, 230, 205, 205, 230, 231, 205, 231, 206,
         206, 231, 232, 206, 232, 207, 207, 232, 233, 207, 233, 208, 208, 233, 234, 208, 234, 209, 209, 234, 235, 209,
         235, 210, 210, 235, 236, 210, 236, 211, 211, 236, 237, 211, 237, 212, 212, 237, 238, 212, 238, 213, 213, 238,
         239, 213, 239, 214, 214, 239, 240, 214, 240, 215, 215, 240, 241, 215, 241, 216, 216, 241, 242, 216, 242, 217,
         217, 242, 243, 217, 243, 218, 218, 243, 244, 218, 244, 219, 219, 244, 245, 219, 245, 220, 220, 245, 246, 220,
         246, 221, 221, 246, 247, 221, 247, 222, 222, 247, 248, 222, 248, 223, 223, 248, 249, 223, 249, 224, 224, 249,
         250, 224, 250, 225, 225, 250, 251, 225, 251, 226, 227, 252, 253, 227, 253, 228, 228, 253, 254, 228, 254, 229,
         229, 254, 255, 229, 255, 230, 230, 255, 256, 230, 256, 231, 231, 256, 257, 231, 257, 232, 232, 257, 258, 232,
         258, 233, 233, 258, 259, 233, 259, 234, 234, 259, 260, 234, 260, 235, 235, 260, 261, 235, 261, 236, 236, 261,
         262, 236, 262, 237, 237, 262, 263, 237, 263, 238, 238, 263, 264, 238, 264, 239, 239, 264, 265, 239, 265, 240,
         240, 265, 266, 240, 266, 241, 241, 266, 267, 241, 267, 242, 242, 267, 268, 242, 268, 243, 243, 268, 269, 243,
         269, 244, 244, 269, 270, 244, 270, 245, 245, 270, 271, 245, 271, 246, 246, 271, 272, 246, 272, 247, 247, 272,
         273, 247, 273, 248, 248, 273, 274, 248, 274, 249, 249, 274, 275, 249, 275, 250, 250, 275, 276, 250, 276, 251,
         252, 277, 278, 252, 278, 253, 253, 278, 279, 253, 279, 254, 254, 279, 280, 254, 280, 255, 255, 280, 281, 255,
         281, 256, 256, 281, 282, 256, 282, 257, 257, 282, 283, 257, 283, 258, 258, 283, 284, 258, 284, 259, 259, 284,
         285, 259, 285, 260, 260, 285, 286, 260, 286, 261, 261, 286, 287, 261, 287, 262, 262, 287, 288, 262, 288, 263,
         263, 288, 289, 263, 289, 264, 264, 289, 290, 264, 290, 265, 265, 290, 291, 265, 291, 266, 266, 291, 292, 266,
         292, 267, 267, 292, 293, 267, 293, 268, 268, 293, 294, 268, 294, 269, 269, 294, 295, 269, 295, 270, 270, 295,
         296, 270, 296, 271, 271, 296, 297, 271, 297, 272, 272, 297, 298, 272, 298, 273, 273, 298, 299, 273, 299, 274,
         274, 299, 300, 274, 300, 275, 275, 300, 301, 275, 301, 276, 277, 302, 303, 277, 303, 278, 278, 303, 304, 278,
         304, 279, 279, 304, 305, 279, 305, 280, 280, 305, 306, 280, 306, 281, 281, 306, 307, 281, 307, 282, 282, 307,
         308, 282, 308, 283, 283, 308, 309, 283, 309, 284, 284, 309, 310, 284, 310, 285, 285, 310, 311, 285, 311, 286,
         286, 311, 312, 286, 312, 287, 287, 312, 313, 287, 313, 288, 288, 313, 314, 288, 314, 289, 289, 314, 315, 289,
         315, 290, 290, 315, 316, 290, 316, 291, 291, 316, 317, 291, 317, 292, 292, 317, 318, 292, 318, 293, 293, 318,
         319, 293, 319, 294, 294, 319, 320, 294, 320, 295, 295, 320, 321, 295, 321, 296, 296, 321, 322, 296, 322, 297,
         297, 322, 323, 297, 323, 298, 298, 323, 324, 298, 324, 299, 299, 324, 325, 299, 325, 300, 300, 325, 326, 300,
         326, 301});

    // VK_SHARING_MODE_EXCLUSIVE

    // setup geometry
    auto drawCommands = vsg::Commands::create();
    drawCommands->addChild(vsg::BindVertexBuffers::create(
        0, vsg::DataList{vertices, colors, texcoords}));  // shader doesn't support normals yet..
    drawCommands->addChild(vsg::BindIndexBuffer::create(indices));
    drawCommands->addChild(vsg::DrawIndexed::create(indices->size(), 1, 0, 0, 0));

    // add drawCommands to transform
    transform->addChild(drawCommands);
    scenegraph->addChild(transform);

    compile(scenegraph);

    return scenegraph;
}
